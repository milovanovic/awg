Arbitrary Waveform Generator (AWG) Chisel Generator
========================================================

## Overview
This repository contains a couple of generators/synthesizers of a parametrizable arbitrary waveforms, written in [Chisel](http://www.chisel-lang.org) hardware design language.

To make a Chisel project and include AWG generator, an open source starter template [Chipyard Framework](http://github.com/ucb-bar/chipyard) can be used.

### Arbitrary Waveform Generator
Arbitrary Waveform Generator relies on two independent submodules described in its own repositories: [PLWG](https://github.com/milovanovic/plwg) and [NCO](https://github.com/milovanovic/nco) . 
Arbitrary Waveform Generator is basically a NCO sourced by PLWG. The generated module can be used for producing various output signals, such as a simple sine wave, sum of several sine waves or a chirp signal. 
The module can consist of a single PLWG-NCO chain or three PLWG-NCO chains with their outputs added together. Before the addition, every NCO output can be multiplied with appropriate value smaller than or equal 1.
The generated module has two interfaces: AXI4 Streaming Master Interface for output signal and AXI4 Memory Mapped Interface for writing and reading multiplying factors, as well as for writing and reading 
configurational and control registers used in NCO and PLWG submodules.

This repository also contains the AWG-FFT chain generators. Those generators consist of previously described AWG blocks chained with FFT blocks from its own repository [FFT](https://github.com/milovanovic/sdf-fft) . The 
latter submodule calculates the FFT of the output signal generated by AWG submodule and sends it to the output. AXI4 Streaming Master Interface is used for the output.

Arbitrary Waveform Generator is described with following Scala files available inside`src/main/scala` directory:

 - `SingleAWG.scala` - contains a single PLWG-NCO chain generator
 - `AWG.scala` - contains a generator with three PLWG-NCO chains
 - `AWGUtils.scala` - contains modules used for interconnections between outputs of NCOs and top module outputs
 - `SingleAWGFFTChain.scala` - contains an AWG-FFT chain generator where AWG consists of a single PLWG-NCO chain
 - `AWGFFTChain.scala` - contains an AWG-FFT chain generator where AWG consists of three PLWG-NCO chains

## Tests

Besides main source code, several tests for AWG generator are provided in this repository. These tests, as well as the other structures needed for running them, are located in `src/test/scala` directory in the following files:
- `SingleAWGSpec.scala` - contains a tester which instantiates and configures an AWG module with a single PLWG-NCO chain. Simple sine wave is generated on the output. Can be run using `testOnly nco.SingleAWGSpec` command
- `AWGSpec.scala` - contains a tester which instantiates and configures an AWG module with three PLWG-NCO chains. The sum of three sine waves with different frequencies and amplitudes is generated on the output. 
Can be run using `testOnly nco.AWGSpec` command
- `SingleAWGFFTChainSpec.scala` - contains a tester which instantiates and configures a Single AWG-FFT Chain. FFT values of a simple sine wave are generated on the output. Can be run using 
`testOnly nco.SingleAWGFFTChainSpec` command
- `AWGFFTChainSpec.scala` - contains a tester which instantiates and configures an AWG-FFT Chain where AWG module consists of three PLWG-NCO chains. FFT values of the sum of three sine waves with different 
frequencies and amplitudes are generated on the output. Can be run using `testOnly nco.AWGFFTChainSpec` command
